---
/**
 * Image Component
 *
 * Wrapper for images with built-in optimization and responsive design
 *
 * @component
 */
import { Image as AstroImage } from "astro:assets";
import type { ImageMetadata } from "astro";

export interface Props {
    src: string | ImageMetadata;
    alt: string;
    width?: number;
    height?: number;
    aspectRatio?: "16/9" | "4/3" | "1/1" | "3/2" | "21/9";
    loading?: "lazy" | "eager";
    objectFit?: "cover" | "contain" | "fill" | "none";
    rounded?: boolean | "sm" | "md" | "lg" | "xl" | "full";
    class?: string;
}

const {
    src,
    alt,
    width,
    height,
    aspectRatio,
    loading = "lazy",
    objectFit = "cover",
    rounded = false,
    class: className = "",
} = Astro.props;

const aspectRatioClasses = {
    "16/9": "aspect-video",
    "4/3": "aspect-4/3",
    "1/1": "aspect-square",
    "3/2": "aspect-3/2",
    "21/9": "aspect-21/9",
};

const objectFitClasses = {
    cover: "object-cover",
    contain: "object-contain",
    fill: "object-fill",
    none: "object-none",
};

const roundedClasses = {
    true: "rounded-lg",
    sm: "rounded-sm",
    md: "rounded-md",
    lg: "rounded-lg",
    xl: "rounded-xl",
    full: "rounded-full",
    false: "",
};

const roundedClass =
    rounded === false
        ? ""
        : roundedClasses[rounded === true ? "true" : rounded];
---

{
    typeof src === "string" ? (
        <img
            src={src}
            alt={alt}
            width={width}
            height={height}
            loading={loading}
            class:list={[
                aspectRatio && aspectRatioClasses[aspectRatio],
                objectFitClasses[objectFit],
                roundedClass,
                className,
            ]}
        />
    ) : (
        <AstroImage
            src={src}
            alt={alt}
            width={width}
            height={height}
            loading={loading}
            class:list={[
                aspectRatio && aspectRatioClasses[aspectRatio],
                objectFitClasses[objectFit],
                roundedClass,
                className,
            ]}
        />
    )
}
