---
/**
 * Footer Component
 *
 * Multi-column responsive footer with flexible slot-based content.
 * Features decorative elements, responsive grid, and theme support.
 *
 * @component
 * @example
 * ```astro
 * <Footer columns={4} showGradientBorder showPattern>
 *   <div slot="column-1">
 *     <h3>About</h3>
 *     <p>Company info</p>
 *   </div>
 *   <div slot="column-2">
 *     <h3>Links</h3>
 *   </div>
 *   <div slot="bottom">
 *     <p>&copy; 2026 Company</p>
 *   </div>
 * </Footer>
 * ```
 */

export interface Props {
    /** Number of columns 2-4) */
    columns?: 2 | 3 | 4;
    /** Copyright text (optional if using bottom slot) */
    copyright?: string;
    /** Show decorative dot pattern background */
    showPattern?: boolean;
    /** Show gradient top border */
    showGradientBorder?: boolean;
    /** Additional CSS classes */
    class?: string;
}

const {
    columns = 4,
    copyright,
    showPattern = true,
    showGradientBorder = true,
    class: className = "",
} = Astro.props;

const currentYear = new Date().getFullYear();

// Grid column classes
const gridClasses = {
    2: "grid-cols-1 sm:grid-cols-2",
    3: "grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",
    4: "grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",
};
---

<footer class:list={["footer", className]}>
    <!-- Decorative Pattern -->
    {
        showPattern && (
            <div
                class="absolute inset-0 bg-professional-dots opacity-50"
                aria-hidden="true"
            />
        )
    }

    <!-- Decorative Gradient Border -->
    {
        showGradientBorder && (
            <div
                class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-secondary via-accent to-primary"
                aria-hidden="true"
            />
        )
    }

    <!-- Footer Content -->
    <div class="container-custom relative z-10">
        <!-- Column Grid -->
        {
            (Astro.slots.has("column-1") ||
                Astro.slots.has("column-2") ||
                Astro.slots.has("column-3") ||
                Astro.slots.has("column-4")) && (
                <div class:list={["grid gap-12 mb-12", gridClasses[columns]]}>
                    {Astro.slots.has("column-1") && (
                        <div>
                            <slot name="column-1" />
                        </div>
                    )}
                    {Astro.slots.has("column-2") && (
                        <div>
                            <slot name="column-2" />
                        </div>
                    )}
                    {Astro.slots.has("column-3") && columns >= 3 && (
                        <div>
                            <slot name="column-3" />
                        </div>
                    )}
                    {Astro.slots.has("column-4") && columns >= 4 && (
                        <div>
                            <slot name="column-4" />
                        </div>
                    )}
                </div>
            )
        }

        <!-- Bottom Section -->
        <div class="border-t border-[var(--border-secondary)] pt-8">
            {
                Astro.slots.has("bottom") ? (
                    <slot name="bottom" />
                ) : copyright ? (
                    <div class="text-center text-sm text-[var(--text-secondary)]">
                        <p>
                            &copy; {currentYear} {copyright}. All rights
                            reserved.
                        </p>
                    </div>
                ) : (
                    <div class="text-center text-sm text-[var(--text-secondary)]">
                        <p>&copy; {currentYear}. All rights reserved.</p>
                    </div>
                )
            }
        </div>
    </div>
</footer>

<style>
    .footer {
        position: relative;
        background: var(--bg-elevated);
        color: var(--text-primary);
        padding: 4rem 0;
        overflow: hidden;
        transition: colors var(--transition-base);
        border-top: 1px solid var(--border-secondary);
    }

    /* Professional dot pattern utility */
    .bg-professional-dots {
        background-image: radial-gradient(
            circle,
            color-mix(in srgb, var(--color-primary), transparent 95%) 1px,
            transparent 1px
        );
        background-size: 24px 24px;
    }
</style>
