---
/**
 * ContentCard Component
 *
 * Flexible card wrapper with multiple style variants.
 * Supports glassmorphism, elevated styling, and gradient backgrounds.
 * Uses named slots for header, content, and footer.
 *
 * @component
 * @example
 * ```astro
 * <ContentCard variant="glass">
 *   <h2 slot="header">Card Title</h2>
 *   <p>Card content goes here</p>
 *   <div slot="footer">
 *     <button>Action</button>
 *   </div>
 * </ContentCard>
 *
 * <ContentCard variant="elevated" hoverEffect={true} maxWidth="2xl">
 *   <p>Simple elevated card with hover effect</p>
 * </ContentCard>
 * ```
 */

export interface Props {
  /** Card visual style variant */
  variant?: "default" | "glass" | "elevated" | "gradient";
  /** Internal padding size */
  padding?: "sm" | "md" | "lg";
  /** Maximum width constraint */
  maxWidth?: "sm" | "md" | "lg" | "xl" | "2xl" | "full";
  /** Enable hover lift effect */
  hoverEffect?: boolean;
  /** Additional CSS classes */
  class?: string;
}

const {
  variant = "default",
  padding = "md",
  maxWidth = "full",
  hoverEffect = true,
  class: className = "",
} = Astro.props;

// Map maxWidth to CSS values
const maxWidthMap: Record<NonNullable<Props["maxWidth"]>, string> = {
  sm: "32rem", // 512px
  md: "48rem", // 768px
  lg: "64rem", // 1024px
  xl: "80rem", // 1280px
  "2xl": "96rem", // 1536px
  full: "100%",
};
---

<article
  class={`content-card content-card--${variant} content-card--padding-${padding} ${hoverEffect ? "content-card--hover" : ""} ${className}`}
  style={`max-width: ${maxWidthMap[maxWidth]};`}
>
  {
    Astro.slots.has("header") && (
      <header class="content-card__header">
        <slot name="header" />
      </header>
    )
  }

  <div class="content-card__body">
    <slot />
  </div>

  {
    Astro.slots.has("footer") && (
      <footer class="content-card__footer">
        <slot name="footer" />
      </footer>
    )
  }
</article>

<style>
  /* === BASE CARD STYLING === */
  .content-card {
    position: relative;
    width: 100%;
    border-radius: 1.5rem;
    border: 1px solid var(--border-primary);
    box-shadow: var(--shadow-lg);
    transition: all var(--transition-slow);
    overflow: hidden;
  }

  /* === PADDING VARIANTS === */
  .content-card--padding-sm {
    padding: 1rem;
  }

  .content-card--padding-md {
    padding: 1.5rem 1.25rem;
  }

  .content-card--padding-lg {
    padding: 2rem 1.5rem;
  }

  @media (min-width: 768px) {
    .content-card--padding-sm {
      padding: 1.5rem;
    }

    .content-card--padding-md {
      padding: 2.5rem 2rem;
    }

    .content-card--padding-lg {
      padding: 3.5rem 3rem;
    }
  }

  /* === STYLE VARIANTS === */

  /* Default: Solid elevated card */
  .content-card--default {
    background: var(--bg-elevated);
  }

  /* Glass: Semi-transparent with backdrop blur */
  .content-card--glass {
    background: color-mix(in srgb, var(--bg-elevated), transparent 10%);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Elevated: Enhanced shadow depth */
  .content-card--elevated {
    background: var(--bg-elevated);
    box-shadow: var(--shadow-xl);
  }

  /* Gradient: Subtle gradient background */
  .content-card--gradient {
    background: linear-gradient(
      135deg,
      var(--bg-elevated) 0%,
      color-mix(in srgb, var(--bg-elevated), var(--color-primary) 3%) 100%
    );
  }

  /* === HOVER EFFECT === */
  .content-card--hover:hover {
    box-shadow: var(--shadow-xl);
    border-color: var(--color-primary);
    transform: translateY(-2px);
  }

  .content-card--elevated.content-card--hover:hover {
    box-shadow:
      var(--shadow-xl),
      0 0 0 1px var(--color-primary);
  }

  /* === CARD SECTIONS === */
  .content-card__header {
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-secondary);
  }

  .content-card__body {
    flex: 1;
  }

  .content-card__footer {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border-secondary);
  }

  /* === ACCESSIBILITY === */
  @media (prefers-reduced-motion: reduce) {
    .content-card {
      transition: none !important;
    }

    .content-card--hover:hover {
      transform: none !important;
    }
  }

  /* === FALLBACK FOR BROWSERS WITHOUT BACKDROP-FILTER SUPPORT === */
  @supports not (backdrop-filter: blur(12px)) {
    .content-card--glass {
      background: var(--bg-elevated);
    }
  }
</style>

<!--
MIGRATION EXAMPLES:

1. ParkerenAutos - Full card wrapper (lines 50-200):
   BEFORE:
   <section class="relative overflow-hidden rounded-3xl p-10 md:p-12 lg:p-16 
                   bg-[color-mix(in_srgb,var(--bg-elevated),transparent_10%)] 
                   backdrop-filter backdrop-blur-xl border border-[var(--border-primary)] 
                   shadow-2xl hover:shadow-[0_20px_60px_-15px_rgba(80,176,174,0.3)]">
     <div class="relative z-10">
       <h2>Title</h2>
       <div>Content</div>
     </div>
   </section>
   
   AFTER:
   <ContentCard variant="glass" padding="lg" hoverEffect={true}>
     <h2 slot="header">Title</h2>
     <div>Content</div>
   </ContentCard>

2. EhboPosten - Medical card (lines 60-280):
   BEFORE:
   <article class="medical-card">
     <header class="medical-header">
       <h2>EHBO Posten</h2>
     </header>
     <div class="medical-content">
       <p>Content</p>
     </div>
   </article>
   <style>
     .medical-card {
       background: var(--bg-elevated);
       border-radius: 1.5rem;
       padding: 3rem;
       border: 1px solid var(--border-primary);
       box-shadow: var(--shadow-lg);
     }
   </style>
   
   AFTER:
   <ContentCard variant="elevated" padding="lg" maxWidth="2xl">
     <h2 slot="header">EHBO Posten</h2>
     <p>Content</p>
   </ContentCard>

3. Toegankelijkheid - Glass card with header and footer:
   BEFORE:
   <div class="glass-card">
     <div class="card-header">
       <h2>Toegankelijkheid</h2>
     </div>
     <div class="card-body">
       <p>Content</p>
     </div>
     <div class="card-footer">
       <a href="#">Meer info</a>
     </div>
   </div>
   
   AFTER:
   <ContentCard variant="glass" padding="md">
     <h2 slot="header">Toegankelijkheid</h2>
     <p>Content</p>
     <div slot="footer">
       <a href="#">Meer info</a>
     </div>
   </ContentCard>

4. Simple default card:
   BEFORE:
   <div class="bg-elevated rounded-2xl p-8 border border-primary/20 shadow-lg">
     <p>Simple content</p>
   </div>
   
   AFTER:
   <ContentCard variant="default" padding="md">
     <p>Simple content</p>
   </ContentCard>

BENEFITS:
- 100+ lines of duplicate card styling removed across 8 components
- Consistent card patterns throughout Bereikbaarheid section
- Named slots provide flexible content structure
- Automatic responsive padding
- Built-in hover effects and transitions
- Fallback support for browsers without backdrop-filter
- Automatic dark mode support
- Easy to maintain and extend
-->
