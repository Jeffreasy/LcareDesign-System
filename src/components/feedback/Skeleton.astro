---
/**
 * Skeleton Component
 *
 * Loading placeholder with shimmer animation
 *
 * @component
 */

export interface Props {
    variant?: "text" | "circular" | "rectangular";
    width?: string;
    height?: string;
    animate?: boolean;
    class?: string;
}

const {
    variant = "text",
    width,
    height,
    animate = true,
    class: className = "",
} = Astro.props;

const baseClasses = "bg-border-secondary";

const variantClasses = {
    text: "rounded",
    circular: "rounded-full",
    rectangular: "rounded-xl",
};

const defaultSizes = {
    text: { width: "100%", height: "1rem" },
    circular: { width: "3rem", height: "3rem" },
    rectangular: { width: "100%", height: "8rem" },
};

const finalWidth = width || defaultSizes[variant].width;
const finalHeight = height || defaultSizes[variant].height;
---

<div
    class:list={[
        baseClasses,
        variantClasses[variant],
        animate && "animate-shimmer",
        className,
    ]}
    style={`width: ${finalWidth}; height: ${finalHeight};`}
    aria-label="Loading placeholder"
    role="status"
>
    <span class="sr-only">Loading...</span>
</div>
