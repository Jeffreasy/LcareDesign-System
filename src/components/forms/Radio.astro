---
/**
 * Radio Component
 *
 * Custom styled radio button with accessible markup
 *
 * @component
 */

export interface Props {
    name: string;
    id?: string;
    label: string;
    value: string;
    checked?: boolean;
    disabled?: boolean;
    error?: boolean;
    class?: string;
}

const {
    name,
    id,
    label,
    value,
    checked = false,
    disabled = false,
    error = false,
    class: className = "",
} = Astro.props;

const radioId = id || `${name}-${value}`;
---

<div class:list={["flex items-start gap-3", className]}>
    <div class="relative flex items-center justify-center">
        <input
            type="radio"
            name={name}
            id={radioId}
            value={value}
            checked={checked}
            disabled={disabled}
            aria-invalid={error ? "true" : "false"}
            class="peer sr-only"
        />
        <div
            class:list={[
                "flex h-5 w-5 items-center justify-center rounded-full border-2 transition-all",
                "peer-focus:ring-4 peer-focus:ring-primary/20",
                "peer-disabled:opacity-50 peer-disabled:cursor-not-allowed",
                error ? "border-error" : "border-border-primary bg-elevated",
            ]}
        >
            <div
                class:list={[
                    "h-2.5 w-2.5 rounded-full bg-primary opacity-0 transition-all",
                    "peer-checked:opacity-100 peer-checked:scale-100 scale-0",
                ]}
                aria-hidden="true"
            >
            </div>
        </div>
    </div>

    <label
        for={radioId}
        class:list={[
            "text-sm font-medium text-text-primary select-none cursor-pointer",
            disabled && "opacity-50 cursor-not-allowed",
        ]}
    >
        {label}
    </label>
</div>

<style>
    /* Smooth radio animation */
    input[type="radio"]:checked + div > div {
        animation: radioPop 0.2s ease-out;
    }

    @keyframes radioPop {
        0% {
            transform: scale(0);
        }
        50% {
            transform: scale(1.2);
        }
        100% {
            transform: scale(1);
        }
    }
</style>
