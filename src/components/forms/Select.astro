---
/**
 * Select Component
 *
 * Custom styled select dropdown
 *
 * @component
 */

export interface SelectOption {
    value: string;
    label: string;
    disabled?: boolean;
}

export interface Props {
    name: string;
    id?: string;
    options: SelectOption[];
    value?: string;
    placeholder?: string;
    required?: boolean;
    disabled?: boolean;
    error?: boolean;
    success?: boolean;
    fullWidth?: boolean;
    class?: string;
}

const {
    name,
    id = name,
    options,
    value,
    placeholder = "Selecteer een optie",
    required = false,
    disabled = false,
    error = false,
    success = false,
    fullWidth = false,
    class: className = "",
} = Astro.props;

const stateClasses = error
    ? "border-error focus:ring-error/20"
    : success
      ? "border-success focus:ring-success/20"
      : "border-border-primary focus:ring-primary/20";
---

<div class:list={["relative", fullWidth && "w-full", className]}>
    <select
        name={name}
        id={id}
        required={required}
        disabled={disabled}
        aria-invalid={error ? "true" : "false"}
        class:list={[
            "appearance-none rounded-xl border-2 px-4 py-2.5 pr-10 font-body text-base transition-all duration-200",
            "bg-elevated text-text-primary",
            "focus:outline-none focus:ring-4",
            "disabled:opacity-50 disabled:cursor-not-allowed",
            "cursor-pointer",
            stateClasses,
            fullWidth && "w-full",
        ]}
    >
        {
            placeholder && (
                <option value="" disabled selected={!value}>
                    {placeholder}
                </option>
            )
        }
        {
            options.map((option) => (
                <option
                    value={option.value}
                    selected={value === option.value}
                    disabled={option.disabled}
                >
                    {option.label}
                </option>
            ))
        }
    </select>

    <!-- Dropdown arrow icon -->
    <div
        class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-text-secondary"
        aria-hidden="true"
    >
        <svg
            class="h-5 w-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
        </svg>
    </div>
</div>

<style>
    /* Remove default arrow */
    select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
    }

    /* Custom option styling */
    select option {
        background-color: var(--bg-elevated);
        color: var(--text-primary);
        padding: 0.5rem;
    }

    select option:disabled {
        color: var(--text-tertiary);
    }
</style>
